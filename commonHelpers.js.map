{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function imageMarkupTemplate(arr) {\n  return arr\n    .map(item => {\n      return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${item.webformatURL}\"\n      alt=\"${item.tags}\"\n    />\n  </a>\n     <ul class=\"image-desc\">\n        <li class=\"image-subtitle\"> \n            <h3 class=\"image-desc-title\">Likes</h3>\n            <p class=\"image-desc-text\">${item.likes}</p>\n        </li>\n         <li class=\"image-subtitle\"> \n            <h3 class=\"image-desc-title\">Views</h3>\n            <p class=\"image-desc-text\">${item.views}</p>\n        </li>\n        <li class=\"image-subtitle\"> \n            <h3 class=\"image-desc-title\">Comments</h3>\n            <p class=\"image-desc-text\">${item.comments}</p>\n        </li>\n        <li class=\"image-subtitle\"> \n            <h3 class=\"image-desc-title\">Downloads</h3>\n            <p class=\"image-desc-text\">${item.downloads}</p>\n        </li>\n     </ul>\n</li>`;\n    })\n    .join('');\n}\n","import Axios from 'axios';\n\nconst axios = Axios.create({\n  baseURL: 'https://pixabay.com',\n});\n\nexport async function onSearchImages(inputValue, currentPage) {\n  const res = await axios.get('/api/', {\n    params: {\n      key: '45015838-73ef95672254612a035b0fb4a',\n      q: inputValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: 15,\n    },\n  });\n  return res.data;\n}\n","import { imageMarkupTemplate } from './js/render-functions';\nimport { onSearchImages } from './js/pixabay-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\n  formEl: document.querySelector('.js-form'),\n  inputSearchEl: document.querySelector('.input-search'),\n  btnSearchEl: document.querySelector('.btn-search'),\n  markupEl: document.querySelector('.markup'),\n  loader: document.querySelector('.loader'),\n  btnLoadMore: document.querySelector('.btn-load'),\n};\n\nhideLoader();\nhideLoadMoreBtn();\n\nlet currentPage = 1;\nlet maxPage = 0;\nconst per_page = 15;\nlet inputValue;\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n  try {\n    e.preventDefault();\n    showLoader();\n    currentPage = 1;\n    refs.markupEl.innerHTML = '';\n    inputValue = refs.formEl.elements.image.value.trim();\n    if (!inputValue) return;\n    refs.formEl.reset();\n    const res = await onSearchImages(inputValue);\n    maxPage = Math.ceil(res.totalHits / per_page);\n    if (!res.hits.length && maxPage === 0) {\n      iziToast.show({\n        title: 'Oops',\n        titleColor: '#FAFAFB',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#FAFAFB',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n        timeout: 3000,\n      });\n      return;\n    }\n    renderImages(res.hits);\n    gallery.refresh();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      titleColor: '#FAFAFB',\n      message: 'Sorry, something wrong',\n      position: 'topRight',\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n      timeout: 3000,\n    });\n  } finally {\n    updateBtnStatus();\n    hideLoader();\n  }\n}\n\nrefs.btnLoadMore.addEventListener('click', async () => {\n  currentPage += 1;\n  showLoader();\n  try {\n    const res = await onSearchImages(inputValue, currentPage);\n    const markup = imageMarkupTemplate(res.hits);\n    refs.markupEl.insertAdjacentHTML('beforeend', markup);\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      titleColor: '#FAFAFB',\n      message: 'Sorry, something wrong',\n      position: 'topRight',\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n      timeout: 3000,\n    });\n  } finally {\n    scrollPage();\n    updateBtnStatus();\n    hideLoader();\n  }\n});\n\nfunction renderImages(arr) {\n  const markup = imageMarkupTemplate(arr);\n  refs.markupEl.innerHTML = markup;\n}\n\nconst gallery = new SimpleLightbox('.gallery-item a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction showLoadMoreBtn() {\n  refs.btnLoadMore.classList.remove('hidden');\n}\n\nfunction hideLoadMoreBtn() {\n  refs.btnLoadMore.classList.add('hidden');\n}\n\nfunction updateBtnStatus() {\n  if (currentPage === maxPage && maxPage !== 1) {\n    hideLoadMoreBtn();\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      messageColor: '#4D3B03',\n      backgroundColor: '#06D8A8',\n      position: 'bottomRight',\n      timeout: 4000,\n    });\n  } else if (maxPage <= 1) {\n    hideLoadMoreBtn();\n  } else {\n    showLoadMoreBtn();\n  }\n}\n\nfunction showLoader() {\n  refs.loader.classList.remove('hidden');\n}\nfunction hideLoader() {\n  refs.loader.classList.add('hidden');\n}\n\nfunction scrollPage() {\n  const myElem = refs.markupEl.firstElementChild;\n\n  const height = myElem.getBoundingClientRect().height;\n\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["imageMarkupTemplate","arr","item","axios","Axios","onSearchImages","inputValue","currentPage","refs","hideLoader","hideLoadMoreBtn","maxPage","per_page","onFormSubmit","e","showLoader","res","iziToast","renderImages","gallery","updateBtnStatus","markup","scrollPage","SimpleLightbox","showLoadMoreBtn","height"],"mappings":"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"}